name: TOC Generator

on: push

permissions:
  contents: write

jobs:
  generate-toc:
    runs-on: ubuntu-22.04
    steps:
      - name: Generate Token
        id: app-token
        uses: actions/create-github-app-token@v1
        with:
          app-id: ${{ secrets.BOT_APP_ID }}
          private-key: ${{ secrets.BOT_PRIVATE_KEY }}

      - uses: technote-space/toc-generator@v4
        with:
          GITHUB_TOKEN: ${{ steps.app-token.outputs.token }}
          FOLDING: true
          TOC_TITLE: 'Details'
          TARGET_PATHS: 'README*.md,Docs/README*.md'